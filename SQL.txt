CREATE TABLE "MAJOR_PROJECT"."REGISTER" 
(
    "FNAME" VARCHAR2(20) NOT NULL ENABLE, 
	"LNAME" VARCHAR2(20), 
	"EMAIL" VARCHAR2(30), 
	"PASSWORD" VARCHAR2(20) NOT NULL ENABLE, 
	"IMAGES" BLOB, 
	"STATUS" VARCHAR2(50), 
	"CODE" VARCHAR2(10), 
	PRIMARY KEY ("EMAIL") USING INDEX  ENABLE
) ;

CREATE TABLE "MAJOR_PROJECT"."INBOX" 
(	"M_ID" NUMBER(30,0), 
	"S_ID" VARCHAR2(30) NOT NULL ENABLE, 
	"R_ID" VARCHAR2(30) NOT NULL ENABLE, 
	"MESSAGES" VARCHAR2(4000), 
	"CON_ID" VARCHAR2(20), 
	"TIME" TIMESTAMP (6) DEFAULT current_timestamp, 
	"READ" VARCHAR2(1), 
	PRIMARY KEY ("M_ID") USING INDEX  ENABLE, 
	FOREIGN KEY ("S_ID") REFERENCES "MAJOR_PROJECT"."REGISTER" ("EMAIL") ENABLE, 
	FOREIGN KEY ("R_ID") REFERENCES "MAJOR_PROJECT"."REGISTER" ("EMAIL") ENABLE, 
	FOREIGN KEY ("CON_ID") REFERENCES "MAJOR_PROJECT"."RELATION" ("CONID") ENABLE
) ;

CREATE TABLE "MAJOR_PROJECT"."MESSAGETABLE" 
(	
    "CONID" VARCHAR2(20), 
	"MESSAGE" VARCHAR2(200), 
	"MESSAGE_TYPE" VARCHAR2(10) NOT NULL ENABLE, 
	"TIME" TIMESTAMP (6), 
	FOREIGN KEY ("CONID") REFERENCES "MAJOR_PROJECT"."RELATION" ("CONID") ENABLE
) ;

CREATE TABLE "MAJOR_PROJECT"."RELATION" 
(	
    "USER_EMAIL" VARCHAR2(20), 
	"FRE_EMAIL" VARCHAR2(20), 
	"CONID" VARCHAR2(20), 
	"X" VARCHAR2(255) NOT NULL ENABLE, 
	"P" VARCHAR2(255) NOT NULL ENABLE, 
	CONSTRAINT "CONID_PK" PRIMARY KEY ("CONID") USING INDEX  ENABLE, 
	CONSTRAINT "USER_EMAIL_FK" FOREIGN KEY ("USER_EMAIL") REFERENCES "MAJOR_PROJECT"."REGISTER" ("EMAIL") ON DELETE CASCADE ENABLE, 
	CONSTRAINT "FRE_EMAIL_FK" FOREIGN KEY ("FRE_EMAIL") REFERENCES "MAJOR_PROJECT"."REGISTER" ("EMAIL") ON DELETE CASCADE ENABLE
) ;


